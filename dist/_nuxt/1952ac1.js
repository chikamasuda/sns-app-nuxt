(window.webpackJsonp=window.webpackJsonp||[]).push([[7,2,3,4],{303:function(t,e,n){var content=n(305);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(64).default)("0b7741fe",content,!0,{sourceMap:!1})},304:function(t,e,n){"use strict";n(303)},305:function(t,e,n){var r=n(63)(!1);r.push([t.i,".icon[data-v-ad9c9516]{width:25px;height:25px;cursor:pointer}",""]),t.exports=r},306:function(t,e,n){"use strict";n.r(e);var r=n(16),o=(n(61),n(75)),c={methods:{logout:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.auth().signOut().then((function(data){t.$router.push("/login")})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},l=n(14),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("nav",[n("ul",[n("li",{staticClass:"side-menu"},[n("NuxtLink",{staticClass:"sidebar-menu-item",attrs:{to:"/"}},[n("img",{attrs:{src:"/img/home.png",alt:"",width:"25"}}),t._v(" "),n("span",{staticClass:"sidemenu-text"},[t._v("ホーム")])])],1),t._v(" "),n("li",{staticClass:"side-menu",on:{click:t.logout}},[n("img",{attrs:{src:"/img/logout.png",alt:"",width:"25"}}),t._v(" "),n("span",{staticClass:"sidemenu-text"},[t._v("ログアウト")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"logo"},[e("img",{attrs:{src:"/img/logo.png",alt:"ロゴ",width:"100"}})])}],!1,null,null,null);e.default=component.exports},307:function(t,e,n){"use strict";n.r(e);var r={props:{postError:{type:String}},data:function(){return{text:null}},methods:{handleSubmit:function(){this.$emit("submit",this.text),null!==this.text&&this.text.length<=120&&(this.text="")}}},o=n(14),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"post-form",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}}},[t._m(0),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{name:"text",id:"text",cols:"37",rows:"6"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),t.postError?n("p",{staticClass:"errors"},[t._v(t._s(t.postError))]):t._e(),t._v(" "),n("button",{staticClass:"button",attrs:{type:"submit"}},[t._v("シェアする")])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-form-label"},[n("label",{attrs:{for:""}},[t._v("シェア")])])}],!1,null,null,null);e.default=component.exports},308:function(t,e,n){"use strict";n.r(e);var r=n(16),o=(n(62),n(76),n(95),n(61),{props:{post:Object,uid:String},methods:{handleToggleLike:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isLiked()?t.$emit("unlike"):t.$emit("like");case 1:case"end":return e.stop()}}),e)})))()},isLiked:function(){return this.post.likes.map((function(t){return t.uid})).includes(this.uid)},emitDeletePost:function(){this.$emit("deletePost",this.post.id)},goPostDetail:function(){this.$router.push({path:"/posts/".concat(this.post.id),params:{id:this.post.id}})}}}),c=(n(304),n(14)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message"},[t.post.users?n("div",{staticClass:"flex"},[n("p",{staticClass:"name"},[t._v(t._s(t.post.users.name))]),t._v(" "),n("font-awesome-layers",{staticClass:"fa icon",on:{click:t.handleToggleLike}},[n("font-awesome-icon",{staticClass:"icon",class:{"red-text":this.isLiked()},attrs:{icon:"heart"}})],1),t._v(" "),t.post.likes?n("p",{staticClass:"number"},[t._v(t._s(t.post.likes.length))]):t._e(),t._v(" "),t.uid===t.post.users.uid?n("img",{staticClass:"icon",attrs:{src:"/img/cross.png"},on:{click:t.emitDeletePost}}):t._e(),t._v(" "),"index"===t.$route.name?n("img",{staticClass:"icon detail",attrs:{src:"/img/detail.png"},on:{click:t.goPostDetail}}):t._e()],1):t._e(),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(t.post.text))])])}),[],!1,null,"ad9c9516",null);e.default=component.exports},309:function(t,e,n){"use strict";var r=n(6),o=n(94).find,c=n(151),l="find",m=!0;l in[]&&Array(1).find((function(){m=!1})),r({target:"Array",proto:!0,forced:m},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c(l)},310:function(t,e,n){"use strict";var r=n(6),o=n(94).findIndex,c=n(151),l="findIndex",m=!0;l in[]&&Array(1).findIndex((function(){m=!1})),r({target:"Array",proto:!0,forced:m},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c(l)},313:function(t,e,n){"use strict";n.r(e);var r=n(16),o=(n(309),n(13),n(310),n(211),n(61),n(75)),c={middleware:"authenticated",data:function(){return{post:{},uid:"",comments:[],comment:"",text:"",postError:"",commentError:""}},methods:{deletePost:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.delete("/api/posts/"+t).then((function(data){e.$router.push("/")})).catch((function(t){console.log(t)}));case 2:case"end":return n.stop()}}),n)})))()},insertPost:function(text){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={text:text,uid:t.uid},e.next=3,t.$axios.post("/api/posts",n).then((function(data){t.text="",t.postError=""})).catch((function(e){t.postError=e.response.data.data.errors.text[0]}));case 3:case"end":return e.stop()}}),e)})))()},like:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var body,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return body={post_id:t.post.id,uid:t.uid,user_id:t.post.users.id},e.next=3,t.$axios.post("/api/likes",body);case 3:n=e.sent,data=n.data,t.post.likes.push(data.like);case 6:case"end":return e.stop()}}),e)})))()},unlike:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.post.likes.find((function(e){return e.uid===t.uid})),e.next=3,t.$axios.delete("/api/likes/".concat(n.id));case 3:r=t.post.likes.findIndex((function(t){return t.id===n.id})),t.post.likes.splice(r,1);case 5:case"end":return e.stop()}}),e)})))()},getPost:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/posts/".concat(t.$route.params.id),e.next=3,t.$axios.get(n).then((function(e){t.post=e.data.post,t.comments=e.data.post.comments})).catch((function(e){t.$router.push("/")}));case 3:case"end":return e.stop()}}),e)})))()},insertComment:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/posts/".concat(t.$route.params.id,"/comments"),r={comment:t.comment,uid:t.uid},e.next=4,t.$axios.post(n,r).then((function(data){t.getPost(),t.comment="",t.commentError=""})).catch((function(e){t.commentError=e.response.data.data.errors.comment[0]}));case 4:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=this;o.a.auth().onAuthStateChanged(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=n.uid,e.next=3,t.getPost();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},created:function(){this.fetchData()}},l=c,m=n(14),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"container",attrs:{dark:""}},[n("div",{staticClass:"sidebar"},[n("SideMenu"),t._v(" "),n("PostForm",{attrs:{postError:t.postError},on:{submit:t.insertPost}})],1),t._v(" "),t.post?n("section",{staticClass:"section"},[n("SkeletonScaffold",{attrs:{primary:"#17202a",animDisable:""}},[n("div",{staticClass:"comment-area"},[n("h2",{staticClass:"comment-title"},[t._v("コメント")]),t._v(" "),t.post?n("Message",{attrs:{post:t.post,uid:t.uid},on:{like:t.like,unlike:t.unlike,deletePost:t.deletePost}}):t._e(),t._v(" "),n("h3",{staticClass:"comment-list-title"},[t._v("コメント")]),t._v(" "),t._l(t.post.comments,(function(e){return n("ul",{key:e.id,staticClass:"comment-list-item"},[n("li",[n("p",{staticClass:"comment-name"},[t._v(t._s(e.users.name))]),t._v(" "),n("p",{staticClass:"comment-text"},[t._v(t._s(e.comment))])])])}))],2),t._v(" "),n("form",{staticClass:"comment-form",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.insertComment()}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{name:"text",id:"text",rows:"2"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),t.commentError?n("p",{staticClass:"errors"},[t._v(t._s(t.commentError))]):t._e(),t._v(" "),n("button",{staticClass:"button btn-padding",attrs:{type:"submit"}},[t._v("コメント")])])])],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SideMenu:n(306).default,PostForm:n(307).default,Message:n(308).default})}}]);